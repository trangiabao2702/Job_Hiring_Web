<div id="content_home_admin">
    <div id="text_recruitment_efficiency">Số lượng tin tuyển dụng: {{length}}</div>
    <table id="table_mamage_recruit" style="width: 1333px;" rules="rows">
        <tr class="title_table_recruit">
            <th style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 5%;">
                STT</th>
            <th style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 20%;">
                Người báo cáo</th>
            <th style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 20%;">
                Tin bị báo cáo</th>
            <th style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 45%;">
                Mô tả báo cáo</th>
            <th style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                Đã được xử lý</th>
        </tr>
    </table>

    <nav aria-label="Page navigation example" id="nav_page_home_manage_recruit">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
        </ul>
    </nav>

    <div class="modal fade" id="modal_report_recruitment" tabindex="-1" aria-labelledby="modal_updateLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="modal-title" id="exampleModalLabel">Báo cáo:&nbsp;<span
                            id="name_job_modal_apply_company">{{data.recruitment.title}}</span> </span>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div>
                    <div class="modal-body modal_body_evaluate">
                        <div id="text_content_modal_report">Nội dung báo cáo:</div>
                        <textarea name="content" class="form-control" id="content_report"></textarea>
                        <input type="text" name="id_recruitments" value="{{data.idDocRecruitment}}"
                            style="display: none;">
                        {{!-- <button type="button" id="close_modal_report">Hủy</button>
                        <button type="submit" id="submit_modal_report">Gửi</button> --}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const _list_reports = {{{ data.list_reports }}}

    for (let i = 0; i < _list_reports.length; i++) {
        let _status = "✅"
        if (_list_reports[i].status == "pending") {
            _status = ""
        }

        $("#table_mamage_recruit").append(`
            <tr id="${_list_reports[i].id_report}|||index:${i}" class="row_report">
                <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 5%;">${i + 1}</td>
                <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 20%;">${_list_reports[i].reporter_name}</td>
                <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 20%;">${_list_reports[i].reported_title}</td>
                <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; width: 45%;">${_list_reports[i].description}</td>
                <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${_status}</td>
            </tr>
        `)
        $("#content_home_admin").append(`
            <button type="button" id="btn_modal_${_list_reports[i].id_report}" data-bs-toggle="modal" data-bs-target="#modal_report_recruitment" hidden></button>
        `)
    }

    $(".row_report").click(function () {
        const _id_report_index = $(this).attr("id").split("|||index:")

        $("#name_job_modal_apply_company").html(_list_reports[parseInt(_id_report_index[1])].reported_title)
        $("#content_report").text(_list_reports[parseInt(_id_report_index[1])].description)

        $(`#btn_modal_${_id_report_index[0]}`).click()
    })
</script>